{% extends "admin/base.html" %}
{% load i18n %}
{% block title %}
    {{ title }} Answers {{ site_title }}
{% endblock %}

{% block branding %}
    <div id="logo" href="/courses" onclick="window.location = '/courses';">
    </div>
{% endblock %}

{% block nav-global %}{% endblock %}

{% block breadcrumbs %}
    <div class="breadcrumb">
        <a href="{% url 'admin:index' %}">
            {% trans 'Home' %}
        </a>
        &rsaquo;
        <a href="{% url 'courses:course_index' %}">
            {% trans 'Courses' %}
        </a>
        &rsaquo;
        <a href="/courses/{{ course_id }}/">
            {% trans 'Lectures' %}
        </a>
        &rsaquo;
        <a href="/courses/{{ course_id }}/{{ lecture_id }}/">
            {% trans 'Questions' %}
        </a>
        &rsaquo;
        <a href="/courses/{{ course_id }}/{{ lecture_id }}/{{ answer_id }}">
            {% trans 'Answers' %}
        </a>
    </div>
{% endblock %}

{{ title }}
{% block content %}
    {% load staticfiles %}

    <div id="content-main">
        <div class="module" id="changelist">
            <div class="results">
                <table id="result_list">
                    <thead>
                        <tr>
                            <th scope="col"> 
                                <span class="text"><a href="?o=1">Answers</a></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
                        <script type="text/javascript" src="{% static 'polls/jquery/timer/jquery.pietimer.js' %}"></script>
                        <script type="text/javascript">
                            $(function() {
                                $('#timer').pietimer({
                                    timerSeconds: 1000,
                                    color: '#234',
                                    fill: false,
                                    showPercentage: true,
                                    callback: function() {
                                        $('form#formAnswer').submit();
                                        $('#timer').pietimer('reset');
                                    }
                                });
                            });
                        </script>

                        <div class="answerwrapper">
                            <div class="answerform">
                                <h1>Add a question to the current lecture: {{ lecture.lecture_text }}</h1>
                                <form action="{% url 'courses:question' lecture.course_id lecture.id %}" method="post" id="formQuestion">
                                    {% csrf_token %}
                                    <textarea name="question" cols=40 rows=6 class="questionArea">Enter your question here...</textarea>
                                    <textarea name="tags" cols=40 rows=6 class="questionArea">Enter the tags here...</textarea>
                                    <p><input type="submit" value="Add question" />
                                </form>
                            </div>
                            <div id="timer"></div>
                        </div>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
